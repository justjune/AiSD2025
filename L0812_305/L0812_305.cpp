#include <iostream>
#include <string>
#include "graph.h"

using namespace std;

void TEST1()
{
    cout << " =================================== " << endl;
    cout << " ДЕМОНСТРАЦИЯ " << endl;
    cout << " =================================== " << endl;
    // Создаем граф с 4 вершинами (0, 1, 2, 3)
    Graph<int> graph(4);
    
    // Настраиваем ребра графа (дороги между городами)
    // Граф представляет 4 города с дорогами между ними
    
    // Город 0 соединен с городом 1 (расстояние 5)
    graph.setWeight(0, 1, 5);
    // Город 0 соединен с городом 3 (расстояние 10)  
    graph.setWeight(0, 3, 10);
    // Город 1 соединен с городом 2 (расстояние 3)
    graph.setWeight(1, 2, 3);
    // Город 2 соединен с городом 3 (расстояние 1)
    graph.setWeight(2, 3, 1);
    
    // Делаем граф неориентированным (дороги в обе стороны)
    graph.setWeight(1, 0, 5);
    graph.setWeight(3, 0, 10);
    graph.setWeight(2, 1, 3);
    graph.setWeight(3, 2, 1);
    
    cout << "Исходные расстояния между городами:" << endl;
    graph.printWeights();
    
    // Запускаем алгоритм Флойда-Уоршелла
    graph.floyd();
    
    cout << "\nКратчайшие расстояния после работы алгоритма:" << endl;
    graph.printWeights();
    
    // Показываем конкретные примеры
    cout << "\nПримеры найденных маршрутов:" << endl;
    cout << "Из города 0 в город 3: " << graph.getWeight(0, 3) << " км" << endl;
    cout << "  (через города 0→1→2→3: 5 + 3 + 1 = 9 км)" << endl;
    cout << "Из города 1 в город 3: " << graph.getWeight(1, 3) << " км" << endl;
    cout << "  (через города 1→2→3: 3 + 1 = 4 км)" << endl;
}




void TEST2()
{
    cout << "\n=================================== " << endl;
    cout << " ДЕМОНСТРАЦИЯ С НЕДОСТИЖИМЫМИ ВЕРШИНАМИ " << endl;
    cout << " =================================== " << endl;
    
    Graph<int> graph(5);
    
    // Создаем два отдельных компонента связности
    // Компонент 1: вершины 0, 1, 2
    graph.setWeight(0, 1, 2);
    graph.setWeight(1, 2, 3);
    graph.setWeight(1, 0, 2);
    graph.setWeight(2, 1, 3);
    
    // Компонент 2: вершины 3, 4
    graph.setWeight(3, 4, 1);
    graph.setWeight(4, 3, 1);
    
    // Между компонентами нет соединений
    
    cout << "Исходный граф с двумя отдельными группами вершин:" << endl;
    graph.printWeights();
    
    graph.floyd();
    
    cout << "\nПосле алгоритма (INF = недостижимо):" << endl;
    graph.printWeights();
    
    cout << "\nПримеры недостижимых маршрутов:" << endl;
    cout << "Из вершины 0 в вершину 3: " << 
        (graph.getWeight(0, 3) == numeric_limits<int>::max() ? "недостижимо" : "достижимо") << endl;
    cout << "Из вершины 3 в вершину 0: " << 
        (graph.getWeight(3, 0) == numeric_limits<int>::max() ? "недостижимо" : "достижимо") << endl;
}

int main()
{
    cout << " ДЕМОНСТРАЦИЯ АЛГОРИТМА ФЛОЙДА-УОРШЕЛЛА С ШАБЛОНАМИ" << endl;
    
    

    TEST1();
    TEST2();
    
    cout << "Алгоритм корректно работает с разными типами данных." << endl;
    
    return 0;
}
